{% comment %}
  FAQ Schema - Centralized

  Outputs JSON-LD for FAQPage type.
  Use this snippet when rendering FAQ content (e.g., in collapsible-content section).

  Usage:
    {% render 'seo-faq-schema', faq_items: blocks %}

  Expected faq_items format:
    Array of blocks/items with:
      - heading (string): The question
      - content (string): The answer (can contain HTML)

  Example:
    {%- assign faq_items = section.blocks | where: 'type', 'collapsible_row' -%}
    {%- if faq_items.size > 0 -%}
      {% render 'seo-faq-schema', faq_items: faq_items %}
    {%- endif -%}
{% endcomment %}

{%- if faq_items.size > 0 -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {%- for item in faq_items -%}
    {
      "@type": "Question",
      "name": {{ item.settings.heading | json }},
      "acceptedAnswer": {
        "@type": "Answer",
        "text": {{ item.settings.content | strip_html | json }}
      }
    }{% unless forloop.last %},{% endunless %}
    {%- endfor -%}
  ]
}
</script>
{%- endif -%}
