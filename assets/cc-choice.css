/**
 * Cute Cards Choice Modal - Styles
 * Modular architecture - built from src/cc-choice/styles/
 * Do NOT edit this file directly - edit source files instead
 * Build: 2025-11-17T18:05:38.681Z
 */

/* ========== base.css ========== */

/* ========================================
   LAYOUT CSS VARIABLES
   ======================================== */

:root {
  /* Layout engine configuration (read by core/layout.js) */
  --ccc-header-height: 110px;   /* Personaliser header height */
  --ccc-modal-padding: 24px;     /* Padding around modal content */
  --ccc-column-gap: 32px;        /* Gap between preview and controls columns */
  --ccc-card-aspect: 1.43;       /* Card aspect ratio (width/height) */

  /* Dynamic layout values (set by JS, consumed by CSS) */
  /* --ccc-card-width: calculated by layout engine */
  /* --ccc-card-height: calculated by layout engine */
}

/* ========================================
   MODAL CONTAINER & BACKDROP
   ======================================== */

.ccc[hidden] {
  display: none;
}

.ccc {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 99999;
  display: flex;
  align-items: center;
  justify-content: center;
  perspective: 1000px;
  pointer-events: auto;
}

.ccc__backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85) !important;
  cursor: pointer;
  opacity: 1 !important;
  z-index: 1;
  pointer-events: auto;
  display: block !important;
  visibility: visible !important;
}

@keyframes backdropFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.ccc__dialog {
  position: relative;
  z-index: 2;
  width: 92%;
  max-width: 920px;
  max-height: 92vh;
  background-color: var(--brutal-white);
  color: var(--brutal-black) !important;
  border: var(--brutal-border);
  border-radius: var(--brutal-radius);
  box-shadow: var(--brutal-shadow-xl);
  overflow-y: auto;
  overscroll-behavior: contain;
  overflow-x: hidden;
  animation: dialogEnter 0.35s var(--ease-out-expo) forwards;
  transform-origin: center center;
  transition: width 0.35s var(--ease-out-expo), max-width 0.35s var(--ease-out-expo), height 0.35s var(--ease-out-expo), opacity 0.2s ease;
}

.ccc__dialog--personalise {
  /* Much wider desktop shell */
  width: min(96vw, 1280px);
  max-width: 1280px;
  transition: width 0.35s var(--ease-out-expo), max-width 0.35s var(--ease-out-expo), height 0.35s var(--ease-out-expo);
}

/* Removed intermediate desktop overrides - keep modal large on all desktop screens */

@media (max-width: 1024px) {
  .ccc__dialog--personalise {
    width: 96vw;
    max-width: 96vw;
  }
}

.ccc__dialog--morphing {
  transition: width 0.35s var(--ease-out-expo), max-width 0.35s var(--ease-out-expo), height 0.35s var(--ease-out-expo);
}

.ccc__dialog--morphing .ccc__body {
  opacity: 0;
  transition: opacity 0.15s ease-out;
}

.ccc__dialog--personalise .ccc__body {
  opacity: 1;
  transition: opacity 0.2s ease-out;
}

@keyframes dialogEnter {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.ccc__dialog::-webkit-scrollbar {
  width: 8px;
}

.ccc__dialog::-webkit-scrollbar-track {
  background: rgba(26, 26, 26, 0.05);
  border-radius: var(--brutal-radius);
}

.ccc__dialog::-webkit-scrollbar-thumb {
  background: rgba(26, 26, 26, 0.2);
  border-radius: var(--brutal-radius);
  transition: background 0.3s ease;
}

.ccc__dialog::-webkit-scrollbar-thumb:hover {
  background: rgba(26, 26, 26, 0.3);
}

/* ========================================
   LOADING VIEW - INSTANT FEEDBACK
   ======================================== */

.ccc__loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  padding: 3rem;
}

.ccc__spinner {
  width: 60px;
  height: 60px;
  position: relative;
}

.ccc__spinner-svg {
  width: 100%;
  height: 100%;
  animation: spinnerRotate 1.4s linear infinite;
}

.ccc__spinner-circle {
  stroke: rgba(26, 26, 26, 0.2);
  stroke-linecap: round;
  animation: spinnerDash 1.4s ease-in-out infinite;
}

@keyframes spinnerRotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes spinnerDash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }
  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}

/* ========================================
   CLOSE BUTTON - PREMIUM INTERACTION
   ======================================== */

.ccc__close {
  position: absolute;
  top: 2rem;
  right: 2rem;
  width: 4.4rem;
  height: 4.4rem;
  padding: 0;
  border: var(--brutal-border-thin);
  background: var(--brutal-yellow);
  color: var(--brutal-black);
  cursor: pointer;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--brutal-radius);
  transition: all var(--brutal-transition-base);
  box-shadow: var(--brutal-shadow-sm);
  opacity: 0;
  animation: closeButtonFadeIn 0.3s 0.15s ease-out forwards;
}

@keyframes closeButtonFadeIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.ccc__close:hover {
  background: var(--brutal-pink);
  transform: translate(-2px, -2px);
  box-shadow: var(--brutal-shadow-md);
}

.ccc__close:active {
  transform: translate(0, 0);
  box-shadow: var(--brutal-shadow-sm);
}

.ccc__close:focus-visible {
  outline: var(--brutal-border-thin) solid var(--brutal-black);
  outline-offset: 2px;
}

.ccc__close svg {
  width: 2rem;
  height: 2rem;
  transition: transform var(--brutal-transition-base);
}

/* ========================================
   MODAL BODY & LAYOUT
   ======================================== */

.ccc__body {
  padding: 4rem;
  min-height: 400px;
}

.ccc__loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 650px;
  color: rgba(26, 26, 26, 0.7);
  gap: 1.5rem;
}

.spinner {
  animation: spinnerRotate 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
}

.spinner__path {
  stroke: var(--brutal-black);
  stroke-linecap: round;
  animation: spinnerDash 1.8s ease-in-out infinite;
}

@keyframes spinnerRotate {
  100% { transform: rotate(360deg); }
}

@keyframes spinnerDash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }
  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}


/* ========== choice.css ========== */

/* ========================================
   CHOICE VIEW - PREMIUM TWO-COLUMN LAYOUT
   ======================================== */

.ccc__choice {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 3rem;
  align-items: start;
  opacity: 0;
  animation: contentFadeIn 0.5s 0.2s var(--ease-out-quart) forwards;
}

.ccc__product-preview {
  display: contents;
}

.ccc__product-image {
  grid-column: 1;
  grid-row: 1;
}

.ccc__product-title {
  grid-column: 2;
  grid-row: 1;
  margin-bottom: 2rem;
}

.ccc__product-price {
  display: none;
}

.ccc__options {
  grid-column: 2;
  grid-row: 1;
  margin-top: 6rem;
}

@keyframes contentFadeIn {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.ccc__product-preview {
  position: sticky;
  top: 0;
  opacity: 0;
  animation: productPreviewFadeIn 0.6s 0.3s var(--ease-out-expo) forwards;
}

@keyframes productPreviewFadeIn {
  from {
    opacity: 0;
    transform: translateX(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

.ccc__product-image {
  width: 100%;
  aspect-ratio: 1;
  object-fit: cover;
  border: var(--brutal-border);
  border-radius: var(--brutal-radius);
  margin-bottom: var(--space-2);
  box-shadow: var(--brutal-shadow-lg);
  transition: all 0.2s var(--ease-out-quart);
}

.ccc__product-image:hover {
  transform: translate(-2px, -2px) scale(1.01);
  box-shadow: 10px 10px 0 var(--brutal-black);
}

/* Subtle printed texture overlay on hover */
@media (prefers-reduced-motion: no-preference) {
  .ccc__product-image::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(26, 26, 26, 0.02) 2px,
        rgba(26, 26, 26, 0.02) 4px
      );
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    border-radius: var(--brutal-radius);
  }

  .ccc__product-image:hover::after {
    opacity: 1;
  }
}

.ccc__product-title {
  font-family: var(--brutal-font-display);
  font-size: var(--brutal-heading-1);
  font-weight: 700;
  line-height: 1.1;
  margin-bottom: var(--space-2);
  color: var(--brutal-black);
  letter-spacing: -0.02em;
  text-transform: none;
}

.ccc__product-price {
  display: none;
}

@keyframes priceChange {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.08);
    color: var(--brutal-pink);
  }
}

/* ========================================
   SIZE SELECTION - PREMIUM RADIO LIST
   ======================================== */

/* ========================================
   PROGRESS STRIP
   ======================================== */

.ccc__progress-strip {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 0 0 2rem 0;
  margin-bottom: 1.5rem;
  border-bottom: 2px solid rgba(26, 26, 26, 0.1);
  font-family: var(--brutal-font-body);
  font-size: 1.3rem;
  font-weight: 500;
  opacity: 0;
  animation: progressStripFadeIn 0.5s 0.3s var(--ease-out-quart) forwards;
}

@keyframes progressStripFadeIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.ccc__progress-step {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  color: rgba(26, 26, 26, 0.4);
  transition: color 0.3s ease;
}

.ccc__progress-step--active {
  color: var(--brutal-black);
  font-weight: 600;
}

.ccc__progress-dot {
  width: 0.8rem;
  height: 0.8rem;
  border-radius: 50%;
  background: rgba(26, 26, 26, 0.2);
  transition: all 0.3s ease;
}

.ccc__progress-step--active .ccc__progress-dot {
  background: var(--brutal-black);
  transform: scale(1.25);
}

.ccc__progress-separator {
  color: rgba(26, 26, 26, 0.3);
  font-weight: 400;
}

.ccc__options {
  opacity: 0;
  animation: optionsFadeIn 0.6s 0.4s var(--ease-out-quart) forwards;
}

@keyframes optionsFadeIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.ccc__sizes-heading {
  font-family: var(--brutal-font-display);
  font-size: var(--brutal-heading-2);
  font-weight: 700;
  margin-bottom: var(--space-2);
  color: var(--brutal-black);
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.ccc__sizes {
  border: none;
  padding: 0;
  margin: 0 0 2rem 0;
}

.ccc__delivery-promise {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.2rem 1.6rem;
  background: var(--brutal-white);
  border: var(--brutal-border-thin);
  border-radius: var(--brutal-radius);
  box-shadow: none;
  margin-bottom: 1.5rem;
  font-family: var(--brutal-font-body);
  font-size: 1.4rem;
  color: var(--brutal-black);
  font-weight: 500;
}

.ccc__delivery-icon {
  flex-shrink: 0;
  background: var(--brutal-yellow);
  border-radius: var(--brutal-radius);
  padding: 0.2rem 0.4rem;
  color: var(--brutal-black);
}

.ccc__delivery-promise span {
  line-height: 1.4;
}

.ccc__size-option {
  display: grid;
  grid-template-columns: auto 1fr;
  align-items: start;
  gap: 1.4rem;
  padding: 1.8rem 2rem;
  border: var(--brutal-border);
  border-radius: var(--brutal-radius);
  margin-bottom: 1rem;
  cursor: pointer;
  transition: all var(--brutal-transition-base);
  background: var(--brutal-white);
  position: relative;
  box-shadow: var(--brutal-shadow-sm);
}

.ccc__size-option::before {
  display: none;
}

.ccc__size-option:hover {
  border-color: var(--brutal-black);
  transform: translate(-2px, -2px);
  box-shadow: var(--brutal-shadow-md);
}

.ccc__size-option:has(input:checked) {
  border-color: var(--brutal-black);
  background: var(--brutal-yellow);
  font-weight: 600;
  transform: translate(-3px, -3px) rotate(var(--brutal-rotate-sm));
  box-shadow: var(--brutal-shadow-lg);
}

.ccc__size-option:has(input:checked):hover {
  transform: translate(-4px, -4px) rotate(var(--brutal-rotate-md)) scale(1.02);
  box-shadow: 10px 10px 0 var(--brutal-black);
}

.ccc__size-option:has(input:disabled) {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
  box-shadow: var(--brutal-shadow-sm);
}

.ccc__size-option:has(input:disabled):hover {
  border-color: var(--brutal-black);
  transform: none;
}

.ccc__size-option input[type="radio"] {
  width: 2.2rem;
  height: 2.2rem;
  margin: 0;
  cursor: pointer;
  accent-color: var(--brutal-black);
  transition: transform var(--brutal-transition-base);
}

.ccc__size-option input[type="radio"]:checked {
  transform: scale(1.15);
}

.ccc__size-option input[type="radio"]:disabled {
  cursor: not-allowed;
}

.ccc__size-content {
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
  flex: 1;
}

.ccc__size-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.ccc__size-label {
  font-size: 1.6rem;
  line-height: 1.4;
  letter-spacing: -0.01em;
  font-weight: 600;
}

.ccc__size-badge {
  font-size: 1.2rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 0.4rem 0.8rem;
  border-radius: var(--brutal-radius);
  background: var(--brutal-pink);
  color: var(--brutal-white);
  line-height: 1;
  animation: badgePulse 2s var(--ease-out-quart) infinite;
}

@keyframes badgePulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

.ccc__size-dimensions {
  font-size: 1.3rem;
  color: rgba(26, 26, 26, 0.6);
  line-height: 1.4;
  font-variant-numeric: tabular-nums;
}

.ccc__size-personality {
  font-size: 1.35rem;
  color: rgba(26, 26, 26, 0.75);
  line-height: 1.5;
  font-weight: 500;
  margin: 0;
  font-style: italic;
}

.ccc__size-price {
  font-size: 1.8rem;
  font-weight: 600;
  color: var(--brutal-black);
  font-variant-numeric: tabular-nums;
  transition: color 0.3s ease;
  margin-top: 0.2rem;
}

.ccc__size-option:has(input:checked) .ccc__size-price {
  color: var(--brutal-pink);
}

.ccc__size-unavailable {
  grid-column: 1 / -1;
  font-size: 1.3rem;
  color: var(--brutal-pink);
  font-weight: 600;
  text-align: center;
  padding-top: 0.8rem;
  border-top: 1px solid rgba(255, 0, 110, 0.2);
  margin-top: 0.4rem;
}

/* ========================================
   ACTION BUTTONS - PREMIUM STYLING
   ======================================== */

.ccc__actions {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  opacity: 0;
  animation: actionsFadeIn 0.5s 0.5s var(--ease-out-quart) forwards;
}

@keyframes actionsFadeIn {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.ccc__actions .button {
  width: 100%;
  justify-content: center;
  padding: 1.6rem 2.4rem;
  font-family: var(--brutal-font-display);
  font-size: 1.6rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border: var(--brutal-border);
  border-radius: var(--brutal-radius);
  transition: all var(--brutal-transition-base);
  position: relative;
  box-shadow: var(--brutal-shadow-md);
}

.ccc__actions .button::before {
  display: none;
}

.ccc__actions .button:hover {
  transform: translate(-2px, -2px);
  box-shadow: var(--brutal-shadow-lg);
}

.ccc__actions .button:active {
  transform: translate(0, 0);
  box-shadow: var(--brutal-shadow-sm);
}

.ccc__actions .button--primary {
  background: var(--brutal-black);
  color: var(--brutal-white);
  border-color: var(--brutal-black);
}

.ccc__actions .button--primary:hover {
  box-shadow: var(--brutal-shadow-pink);
}

.ccc__actions .button--secondary {
  background: var(--brutal-white);
  border: var(--brutal-border);
  color: var(--brutal-black);
}

.ccc__actions .button--secondary:hover {
  background: var(--brutal-lime);
  border-color: var(--brutal-black);
}

.ccc__actions-caption {
  font-family: var(--brutal-font-body);
  font-size: 1.3rem;
  color: rgba(26, 26, 26, 0.65);
  text-align: center;
  margin: -0.8rem 0 0.4rem 0;
  line-height: 1.4;
  font-style: italic;
}

#cc-recs-container {
  margin-top: 0;
}

#cc-recs-container:empty {
  display: none;
}

.ccc__more-info {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.6rem;
  margin-top: 1.5rem;
  font-family: var(--brutal-font-body);
  font-size: 1.4rem;
  color: var(--brutal-black);
  text-decoration: none;
  transition: all var(--brutal-transition-base);
  font-weight: 600;
  border-bottom: 2px solid transparent;
  padding: 0.8rem 0;
}

.ccc__more-info-arrow {
  transition: transform 0.3s var(--ease-out-quart);
}

.ccc__more-info:hover {
  color: var(--brutal-black);
  border-bottom-color: var(--brutal-black);
}

.ccc__more-info:hover .ccc__more-info-arrow {
  transform: translateX(4px);
}

.ccc__footer-mobile {
  display: none;
}


/* ========== personaliser.css ========== */

/* ========================================
   PERSONALISER VIEW - PREMIUM TRANSITIONS
   ======================================== */

.ccc__personaliser {
  max-width: 100%;
  margin: 0 auto;
  opacity: 0;
  animation: personaliserFadeIn 0.5s var(--ease-out-expo) forwards;
  display: flex;
  flex-direction: column;
  min-height: 100%;
}

/* ========================================
   DESKTOP LAYOUT - MOONPIG-GRADE PREMIUM
   Optimized for 1366×768 and 1440×900
   ======================================== */
@media (min-width: 1024px) {
  /* MAIN TWO-COLUMN GRID - 72% preview / 28% controls, NOTHING spans both */
  .ccc__dialog--personalise .ccc__personaliser {
    display: grid;
    grid-template-columns: 2.6fr 1fr; /* ~72% preview, ~28% controls */
    gap: var(--ccc-column-gap);
    max-width: 100%;
    padding: var(--ccc-modal-padding);
    align-items: start;
  }

  /* HIDE BACK BUTTON AND TOP HEADER - metadata moves to card caption */
  .ccc__dialog--personalise .ccc__back {
    display: none;
  }

  .ccc__dialog--personalise .ccc__personaliser-header {
    display: none; /* Hide global header - we'll show it as card caption */
  }

  /* Hide full-width heading - we'll use inline heading in preview column */
  .ccc__dialog--personalise .ccc__preview-heading {
    display: none;
  }

  .ccc__dialog--personalise .ccc__restore-prompt {
    grid-column: 1 / -1;
    margin-bottom: var(--space-2);
  }

  /* ==========================
     LEFT COLUMN - CARD PREVIEW (70%)
     ========================== */

  .ccc__dialog--personalise .ccc__preview-column {
    grid-column: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-1); /* Tightened from 16px to 8px */
  }

  /* Card metadata as caption - lighter, caption feel */
  .ccc__dialog--personalise .ccc__card-caption {
    display: flex;
    align-items: center;
    gap: 12px; /* Slightly tighter */
    margin-bottom: 4px; /* Minimal gap to heading */
  }

  .ccc__dialog--personalise .ccc__card-caption-image {
    width: 48px; /* Smaller - was 56px */
    height: 48px;
    border-radius: var(--brutal-radius);
    flex-shrink: 0;
    object-fit: cover;
    box-shadow: var(--brutal-shadow-sm);
  }

  .ccc__dialog--personalise .ccc__card-caption-info {
    flex: 1;
    min-width: 0;
  }

  .ccc__dialog--personalise .ccc__card-caption-title {
    font-size: 1.5rem; /* Slightly smaller - was 1.6rem */
    font-weight: 500; /* Lighter - was 600 */
    line-height: 1.1; /* Tighter */
    margin-bottom: 3px;
    color: rgba(26, 26, 26, 0.9); /* Slightly lighter */
  }

  .ccc__dialog--personalise .ccc__card-caption-variant {
    font-size: 1.2rem; /* Smaller */
    line-height: 1.1;
    color: rgba(26, 26, 26, 0.5); /* More muted */
  }

  /* "Write your message" heading - BRUTALIST */
  .ccc__dialog--personalise .ccc__preview-column h3 {
    font-family: var(--brutal-font-display); /* Display font */
    font-size: 2.4rem; /* Larger */
    font-weight: 700; /* Bolder */
    text-transform: uppercase; /* Uppercase */
    line-height: 1.2;
    letter-spacing: -0.02em;
    margin: 0 0 var(--space-2) 0; /* Slightly more gap */
    color: var(--brutal-black); /* Solid black */
  }

  /* HERO CARD - BIG, dominant visual with BRUTALIST styling
     NOTE: Overrides base .ccc__card-interior (line ~1202) for personalise view.
     This scoped rule takes precedence due to higher specificity. */
  .ccc__dialog--personalise .ccc__card-interior {
    /* Use dynamic size computed in JS */
    width: var(--ccc-card-width);
    height: var(--ccc-card-height);
    max-height: none;

    aspect-ratio: auto; /* height is now explicit */
    background: #FAFAFA; /* Clean off-white */
    border: var(--brutal-border); /* Thick black border */
    border-radius: var(--brutal-radius); /* Angular/square */
    box-shadow: var(--brutal-shadow-lg); /* Hard offset shadow */
  }

  /* Clear fold line - intentional and visible */
  .ccc__dialog--personalise .ccc__card-fold {
    opacity: 0.3; /* More visible than before */
    border-width: 2px; /* Clear demarcation */
    border-color: var(--brutal-black);
  }

  /* Right page - contains writing area */
  .ccc__dialog--personalise .ccc__card-page--right {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
    padding: 32px; /* even inset all round */
  }

  /* Dedicated writing area container - full page, no inner box */
  .ccc__dialog--personalise .ccc__writing-area {
    width: 100%;
    height: 100%;
    min-height: 0;
    padding: 0;
    margin: 0;
    background: transparent; /* remove inner "paper" box */
    border: none;
    border-radius: 0;
    display: flex;
    align-items: stretch;
    justify-content: flex-start;
    transition: opacity 0.2s ease-in-out;
  }

  /* Leave blank mode - writing area softens */
  .ccc__dialog--personalise .ccc__writing-area--blank {
    opacity: 0.3;
  }

  /* Message field - clean preview, NO spellcheck artifacts, BIGGER and higher contrast */
  .ccc__dialog--personalise .ccc__message-field {
    width: 100%;
    height: 100%;
    padding: 0;
    background: transparent;
    border: none;
    resize: none;
    text-align: left; /* or center, if you prefer */
    font-size: 2rem; /* larger default */
    line-height: 1.6; /* slightly looser */
    font-weight: 500; /* Medium weight for better presence */
    color: var(--brutal-black); /* Strong black */
    overflow: hidden;
    transition: font-size 0.18s ease-in-out, color 0.18s ease-in-out, opacity 0.18s ease-in-out;

    /* CRITICAL: Completely disable spellcheck */
    -webkit-text-decoration-skip: none;
    text-decoration-skip-ink: none;
  }

  .ccc__dialog--personalise .ccc__message-field::-webkit-input-placeholder {
    color: rgba(0, 0, 0, 0.4); /* Higher contrast - was 0.25 */
    font-weight: 500;
  }

  .ccc__dialog--personalise .ccc__message-field::placeholder {
    color: rgba(0, 0, 0, 0.25);
  }

  /* Remove ALL browser spellcheck decorations */
  .ccc__dialog--personalise .ccc__message-field::spelling-error,
  .ccc__dialog--personalise .ccc__message-field::grammar-error {
    text-decoration: none !important;
    background: none !important;
    color: inherit !important;
  }

  /* Leave blank mode - message disappears */
  .ccc__dialog--personalise .ccc__message-field--blank {
    opacity: 0;
    pointer-events: none;
  }

  /* Clear message button */
  .ccc__dialog--personalise .ccc__clear-message-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: rgba(26, 26, 26, 0.03);
    border: 1px solid rgba(26, 26, 26, 0.12);
    border-radius: var(--brutal-radius);
    font-size: 1.2rem;
    font-weight: 500;
    color: rgba(26, 26, 26, 0.6);
    cursor: pointer;
    transition: all 0.18s ease-in-out;
    margin-top: 8px;
  }

  .ccc__dialog--personalise .ccc__clear-message-btn:hover {
    background: rgba(220, 38, 38, 0.05);
    border-color: rgba(220, 38, 38, 0.3);
    color: rgb(220, 38, 38);
  }

  .ccc__dialog--personalise .ccc__clear-message-btn svg {
    opacity: 0.7;
    transition: opacity 0.18s ease-in-out;
  }

  .ccc__dialog--personalise .ccc__clear-message-btn:hover svg {
    opacity: 1;
  }

  .ccc__dialog--personalise .ccc__clear-message-btn[hidden] {
    display: none;
  }

  /* ========================================
     CUSTOM CONFIRMATION DIALOG
     ======================================== */

  .ccc__confirm-dialog {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 100000;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: confirmDialogFadeIn 0.2s ease-out forwards;
  }

  .ccc__confirm-dialog[hidden] {
    display: none;
  }

  @keyframes confirmDialogFadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .ccc__confirm-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    animation: confirmBackdropFadeIn 0.2s ease-out forwards;
  }

  @keyframes confirmBackdropFadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  .ccc__confirm-panel {
    position: relative;
    z-index: 2;
    width: 90%;
    max-width: 340px;
    background: var(--brutal-white);
    border-radius: var(--brutal-radius);
    padding: 2rem;
    box-shadow: var(--brutal-shadow-lg);
    animation: confirmPanelSlideIn 0.3s var(--ease-out-expo) forwards;
  }

  @keyframes confirmPanelSlideIn {
    from {
      opacity: 0;
      transform: translateY(20px) scale(0.96);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .ccc__confirm-icon {
    width: 36px;
    height: 36px;
    margin: 0 auto 1rem auto;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--brutal-radius);
    background: var(--brutal-white);
    border: var(--brutal-border-thin);
    border-color: var(--brutal-pink);
    color: var(--brutal-pink);
  }

  .ccc__confirm-icon svg {
    width: 20px;
    height: 20px;
  }

  .ccc__confirm-title {
    font-size: 1.6rem;
    font-weight: 600;
    line-height: 1.3;
    text-align: center;
    margin: 0 0 0.8rem 0;
    color: var(--brutal-black);
  }

  .ccc__confirm-message {
    font-size: 1.3rem;
    line-height: 1.5;
    text-align: center;
    margin: 0 0 1.6rem 0;
    color: rgba(26, 26, 26, 0.7);
  }

  .ccc__confirm-actions {
    display: flex;
    gap: 1rem;
    flex-direction: column-reverse;
  }

  @media screen and (min-width: 750px) {
    .ccc__confirm-actions {
      flex-direction: row;
    }
  }

  .ccc__confirm-btn {
    flex: 1;
    padding: 1.2rem 1.6rem;
    font-size: 1.4rem;
    font-weight: 600;
    border-radius: var(--brutal-radius);
    border: none;
    cursor: pointer;
    transition: all 0.3s var(--ease-out-expo);
    position: relative;
    overflow: hidden;
  }

  .ccc__confirm-btn::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
  }

  .ccc__confirm-btn:hover::before {
    width: 300px;
    height: 300px;
  }

  .ccc__confirm-btn--cancel {
    background: transparent;
    border: 2px solid rgba(26, 26, 26, 0.2);
    color: var(--brutal-black);
  }

  .ccc__confirm-btn--cancel::before {
    background: rgba(26, 26, 26, 0.05);
  }

  .ccc__confirm-btn--cancel:hover {
    border-color: rgba(26, 26, 26, 0.4);
    background: rgba(26, 26, 26, 0.04);
    transform: translateY(-2px);
    box-shadow: var(--brutal-shadow-sm);
  }

  .ccc__confirm-btn--cancel:active {
    transform: translateY(0);
  }

  .ccc__confirm-btn--confirm {
    background: var(--brutal-pink);
    color: var(--brutal-white);
  }

  .ccc__confirm-btn--confirm::before {
    background: transparent;
  }

  .ccc__confirm-btn--confirm:hover {
    transform: translateY(-2px);
    box-shadow: var(--brutal-shadow-md);
  }

  .ccc__confirm-btn--confirm:active {
    transform: translateY(0);
    box-shadow: var(--brutal-shadow-sm);
  }

  .ccc__confirm-btn:focus {
    outline: 3px solid var(--brutal-black);
    outline-offset: 3px;
  }

  /* Card heading - matches choice view "SELECT SIZE" heading */
  .ccc__dialog--personalise .ccc__card-heading {
    font-family: var(--brutal-font-display);
    font-size: var(--brutal-heading-2);
    font-weight: 700;
    margin-bottom: var(--space-2);
    color: var(--brutal-black);
    letter-spacing: 0.05em;
    text-transform: uppercase;
  }

  /* Message trim notice */
  .ccc__message-trim-notice {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem 1.2rem;
    margin-top: 1rem;
    background: rgba(255, 193, 7, 0.1);
    border: var(--brutal-border-thin) solid var(--brutal-yellow);
    border-radius: var(--brutal-radius);
    font-family: var(--brutal-font-body);
    font-size: 1.2rem;
    color: var(--brutal-black);
  }

  .ccc__message-trim-notice svg {
    flex-shrink: 0;
    color: var(--brutal-yellow);
  }

  .ccc__message-trim-notice[hidden] {
    display: none;
  }

  /* AI SUGGESTIONS - Collapsible section under card */
  .ccc__dialog--personalise .ccc__ai-help-section {
    margin-top: var(--space-2);
    padding-top: var(--space-2);
    border-top: 2px solid rgba(26, 26, 26, 0.1); /* line separator, not a box */
    display: flex;
    flex-direction: column;
    align-items: center; /* center under card */
    gap: var(--space-1);
  }

  .ccc__dialog--personalise .ccc__ai-help-toggle {
    max-width: 360px; /* narrower pill */
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-1);
    padding: 12px var(--space-2);
    background: var(--brutal-white);
    border: var(--brutal-border-thin); /* Thick border */
    border-radius: var(--brutal-radius); /* Angular */
    box-shadow: var(--brutal-shadow-sm); /* Hard shadow */
    font-family: var(--brutal-font-body);
    font-size: 1.3rem;
    font-weight: 600; /* Stronger */
    color: var(--brutal-black); /* Solid black */
    cursor: pointer;
    transition: all var(--brutal-transition-base);
    text-align: center;
  }

  .ccc__dialog--personalise .ccc__ai-help-toggle:hover {
    background: var(--brutal-lime); /* Lime green on hover */
    border-color: var(--brutal-black);
    transform: translate(-2px, -2px); /* Lift effect */
    box-shadow: var(--brutal-shadow-md);
  }

  .ccc__dialog--personalise .ccc__ai-help-toggle:focus {
    outline: var(--brutal-border-thin) solid var(--brutal-black);
    outline-offset: 2px;
  }

  .ccc__dialog--personalise .ccc__ai-help-toggle svg {
    width: 16px;
    height: 16px;
    opacity: 0.6;
    transition: transform 0.18s ease-in-out;
  }

  .ccc__dialog--personalise .ccc__ai-help-toggle[aria-expanded="true"] svg {
    transform: rotate(180deg);
  }

  .ccc__dialog--personalise .ccc__ai-help-description {
    font-size: 1.2rem;
    color: rgba(26, 26, 26, 0.5);
    text-align: center;
    margin-top: -4px;
  }

  .ccc__dialog--personalise .ccc__ai-help-panel {
    padding: var(--space-3);
    background: var(--brutal-white);
    border: var(--brutal-border-thin);
    border-radius: var(--brutal-radius);
    box-shadow: var(--brutal-shadow-sm);
    max-height: 600px;
    opacity: 1;
    overflow: hidden;
    transition: max-height 0.3s var(--ease-out-quart),
                opacity 0.25s var(--ease-out-quart),
                padding 0.3s var(--ease-out-quart);
  }

  .ccc__dialog--personalise .ccc__ai-help-panel:not(.ccc__ai-help-panel--collapsed) {
    overflow-y: auto;
  }

  .ccc__dialog--personalise .ccc__ai-help-panel.ccc__ai-help-panel--collapsed {
    max-height: 0;
    opacity: 0;
    padding-top: 0;
    padding-bottom: 0;
    border-width: 0;
    overflow: hidden;
    visibility: hidden;
  }

  /* AI form inputs */
  .ccc__dialog--personalise .ccc__ai-inputs {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 12px;
  }

  /* General input styling - calm all form fields */
  .ccc__dialog--personalise input[type="text"],
  .ccc__dialog--personalise select,
  .ccc__dialog--personalise textarea {
    border: 1px solid rgba(26, 26, 26, 0.4);
    box-shadow: none;
    border-radius: var(--brutal-radius);
    font-weight: 500;
  }

  .ccc__dialog--personalise .ccc__ai-input {
    width: 100%;
    padding: 12px 14px;
    font-family: var(--brutal-font-body);
    font-size: 1.4rem;
    font-weight: 500;
    border: 1px solid rgba(26, 26, 26, 0.4); /* calmer border */
    border-radius: var(--brutal-radius);
    background: var(--brutal-white);
    color: var(--brutal-black);
    box-shadow: none; /* no shadow on inputs */
    transition: all 0.15s ease-in-out;
  }

  .ccc__dialog--personalise .ccc__ai-input:focus {
    outline: 2px solid var(--brutal-black);
    outline-offset: 2px;
    border-color: var(--brutal-black);
  }

  .ccc__dialog--personalise .ccc__ai-textarea {
    resize: vertical;
    min-height: 60px;
    font-family: inherit;
  }

  /* AI suggestion cards - brutal styling */
  .ccc__dialog--personalise .ccc__ai-suggestion-card {
    padding: var(--space-2);
    margin-bottom: 12px;
    background: var(--brutal-white);
    border: var(--brutal-border-thin);
    border-color: var(--brutal-lime);
    border-radius: var(--brutal-radius);
    box-shadow: var(--brutal-shadow-sm);
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .ccc__dialog--personalise .ccc__ai-suggestion-text {
    font-family: var(--brutal-font-body);
    font-size: 1.4rem;
    line-height: 1.6;
    color: var(--brutal-black);
    font-weight: 500;
  }

  .ccc__dialog--personalise .ccc__ai-suggestion-actions {
    display: flex;
    gap: 10px;
    align-items: center;
  }

  .ccc__dialog--personalise .ccc__ai-use-btn {
    padding: 10px 18px;
    font-family: var(--brutal-font-display);
    font-size: 1.3rem;
    font-weight: 700;
    text-transform: uppercase;
    background: var(--brutal-black); /* Black for primary emphasis */
    color: var(--brutal-white);
    border: var(--brutal-border-thin);
    border-radius: var(--brutal-radius);
    cursor: pointer;
    transition: all 0.15s ease-in-out;
    box-shadow: var(--brutal-shadow-sm);
  }

  .ccc__dialog--personalise .ccc__ai-use-btn:hover {
    background: var(--brutal-lime); /* Lime on hover */
    color: var(--brutal-black);
    transform: translate(-1px, -1px);
    box-shadow: var(--brutal-shadow-md);
    transform: translateY(-1px);
  }

  .ccc__dialog--personalise .ccc__ai-copy-btn {
    padding: 8px 12px;
    font-size: 1.2rem;
    font-weight: 500;
    background: none;
    color: rgba(26, 26, 26, 0.7);
    border: 1px solid var(--brutal-black);
    border-radius: var(--brutal-radius);
    cursor: pointer;
    transition: all 0.15s ease-in-out;
  }

  .ccc__dialog--personalise .ccc__ai-copy-btn:hover {
    background: rgba(26, 26, 26, 0.04);
    color: var(--brutal-black);
  }

  /* ==========================
     RIGHT COLUMN - UNIFIED CONTROL PANEL (30%)
     ========================== */

  .ccc__dialog--personalise .ccc__controls-column {
    grid-column: 2;
    display: flex;
    flex-direction: column;
    gap: 0; /* No gap - panel handles internal spacing */
    margin-top: 96px; /* Align with card preview (caption 60px + heading 36px) */
  }

  /* ONE UNIFIED PANEL CARD - NEOBRUTALIST */
  .ccc__dialog--personalise .ccc__controls-panel {
    background: var(--brutal-white);
    border: var(--brutal-border); /* Thick border */
    border-radius: var(--brutal-radius); /* Angular */
    padding: 20px; /* More generous padding */
    display: flex;
    flex-direction: column;
    gap: 24px; /* Clearer section separation */
    box-shadow: var(--brutal-shadow-md); /* Hard shadow */
  }

  /* Form inherits panel spacing */
  .ccc__dialog--personalise .ccc__form {
    display: flex;
    flex-direction: column;
    gap: 20px; /* Match new panel spacing */
  }

  /* TYPOGRAPHY HEADER WITH CLEAR BUTTON */
  .ccc__dialog--personalise .ccc__typography-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
  }

  .ccc__dialog--personalise .ccc__section-heading,
  .ccc__dialog--personalise .ccc__delivery-heading {
    font-family: var(--brutal-font-display); /* Display font */
    font-size: 1.4rem; /* Larger */
    font-weight: 700; /* Bolder */
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--brutal-black); /* Solid black */
    margin: 0 0 8px 0; /* Bottom spacing for hierarchy */
  }

  /* Unified helper text style for all explanatory copy */
  .ccc__dialog--personalise .ccc__delivery-description,
  .ccc__dialog--personalise .ccc__helper-text,
  .ccc__dialog--personalise .ccc__ai-help-description {
    font-family: var(--brutal-font-body);
    font-size: 1.3rem;
    line-height: 1.5;
    color: rgba(26, 26, 26, 0.7);
  }

  /* Small clear button for header */
  .ccc__dialog--personalise .ccc__clear-message-btn--small {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: transparent;
    border: 1px solid rgba(26, 26, 26, 0.12);
    border-radius: var(--brutal-radius);
    font-size: 1.1rem;
    font-weight: 500;
    color: rgba(26, 26, 26, 0.5);
    cursor: pointer;
    transition: all 0.18s ease-in-out;
  }

  .ccc__dialog--personalise .ccc__clear-message-btn--small:hover {
    background: rgba(220, 38, 38, 0.05);
    border-color: rgba(220, 38, 38, 0.3);
    color: rgb(220, 38, 38);
  }

  .ccc__dialog--personalise .ccc__clear-message-btn--small svg {
    opacity: 0.6;
    transition: opacity 0.18s ease-in-out;
  }

  .ccc__dialog--personalise .ccc__clear-message-btn--small:hover svg {
    opacity: 1;
  }

  .ccc__dialog--personalise .ccc__clear-message-btn--small[hidden] {
    display: none;
  }

  /* CONTROL SECTION STYLING */
  .ccc__dialog--personalise .ccc__typography-section,
  .ccc__dialog--personalise .ccc__delivery-section {
    padding: 0; /* No extra padding - panel handles it */
    background: none; /* No grey slabs - clean brutalist approach */
    border: none; /* No dividers - sections defined by spacing and headings */
    display: flex;
    flex-direction: column;
    gap: 14px; /* Tightened for cohesion */
  }

  /* Leave blank mode - disable typography controls */
  .ccc__dialog--personalise .ccc__typography-section--disabled {
    opacity: 0.4;
    pointer-events: none;
  }

  /* STANDARDIZED LABEL TYPOGRAPHY - small caps, quiet, consistent */
  .ccc__dialog--personalise .ccc__control-label {
    font-size: 1.3rem; /* Standardized to 1.3rem */
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: rgba(26, 26, 26, 0.7);
    margin-bottom: 6px; /* Consistent 6px bottom margin */
  }

  /* Control rows stack vertically with compressed gaps */
  .ccc__dialog--personalise .ccc__control-row {
    display: flex;
    flex-direction: column;
    gap: 12px; /* Further compressed for tight fit */
  }

  .ccc__dialog--personalise .ccc__control-item {
    display: flex;
    flex-direction: column;
    gap: 5px; /* Compressed from 6px */
  }

  /* Font select - BRUTALIST control with thick border and square corners */
  .ccc__dialog--personalise .ccc__font-select {
    font-family: var(--brutal-font-body);
    font-size: 1.5rem; /* Clear but not huge */
    font-weight: 600;
    padding: 1.2rem 1.4rem;
    padding-right: 3.5rem;
    border: var(--brutal-border); /* Thick black border */
    border-radius: var(--brutal-radius); /* Square corners */
    background: var(--brutal-white);
    color: var(--brutal-black);
    transition: all 0.15s ease-in-out;
    min-height: 48px;
    box-shadow: var(--brutal-shadow-sm); /* Hard shadow */
    cursor: pointer;
  }

  .ccc__dialog--personalise .ccc__font-select option {
    font-size: 1.5rem;
    padding: 1rem;
    font-weight: 500;
  }

  .ccc__dialog--personalise .ccc__font-select:hover {
    transform: translate(-1px, -1px);
    box-shadow: var(--brutal-shadow-md);
  }

  .ccc__dialog--personalise .ccc__font-select:focus {
    outline: var(--brutal-border-thin) solid var(--brutal-black);
    outline-offset: 2px;
  }

  /* SEGMENTED CONTROLS - BRUTALIST BLOCKS for SIZE and DELIVERY */
  .ccc__dialog--personalise .ccc__size-buttons,
  .ccc__dialog--personalise .ccc__footer-delivery-toggle {
    display: flex;
    gap: 8px;
    padding: 0; /* No container padding - buttons are standalone */
  }

  .ccc__dialog--personalise .ccc__size-btn,
  .ccc__dialog--personalise .ccc__delivery-toggle-btn {
    flex: 1;
    padding: 12px var(--space-2); /* Generous hit area */
    font-family: var(--brutal-font-display); /* Display font for emphasis */
    font-size: 1.6rem; /* Larger */
    font-weight: 700; /* Bold */
    border: var(--brutal-border); /* Thick border */
    border-radius: var(--brutal-radius); /* Square */
    background: var(--brutal-white);
    color: var(--brutal-black);
    cursor: pointer;
    transition: all 0.15s ease-in-out;
    box-shadow: var(--brutal-shadow-sm);
    text-transform: uppercase; /* Uppercase for SIZE buttons to show emphasis */
  }

  .ccc__dialog--personalise .ccc__size-btn:hover,
  .ccc__dialog--personalise .ccc__delivery-toggle-btn:hover {
    transform: translate(-1px, -1px);
    box-shadow: var(--brutal-shadow-md);
  }

  .ccc__dialog--personalise .ccc__size-btn:focus,
  .ccc__dialog--personalise .ccc__delivery-toggle-btn:focus {
    outline: var(--brutal-border-thin) solid var(--brutal-black);
    outline-offset: 2px;
  }

  .ccc__dialog--personalise .ccc__size-btn--active,
  .ccc__dialog--personalise .ccc__delivery-toggle-btn--active {
    background: var(--brutal-yellow); /* Bold yellow fill */
    color: var(--brutal-black);
    border-color: var(--brutal-black);
    font-weight: 700;
    box-shadow: var(--brutal-shadow-sm);
  }

  /* Delivery tabs - refined selected state */
  .ccc__dialog--personalise .ccc__footer-delivery-toggle {
    background: rgba(26, 26, 26, 0.03); /* Lighter background */
  }

  .ccc__dialog--personalise .ccc__delivery-toggle-btn--active {
    background: rgba(26, 26, 26, 0.08); /* Subtle tint, not solid */
    color: var(--brutal-black);
    border-color: rgba(26, 26, 26, 0.2); /* Clear border */
  }

  /* COLOUR swatches (UK spelling) - LARGE and TACTILE */
  .ccc__dialog--personalise .ccc__color-swatches {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .ccc__dialog--personalise .ccc__color-swatch {
    width: 44px;
    height: 44px;
    border-radius: var(--brutal-radius);
    border: 2px solid var(--brutal-black); /* thinner border for minor controls */
    cursor: pointer;
    transition: all 0.15s ease-in-out;
    box-shadow: none; /* no shadow - not a primary affordance */
  }

  .ccc__dialog--personalise .ccc__color-swatch:hover {
    transform: scale(1.05);
    border-width: 3px; /* slightly thicker on hover */
  }

  .ccc__dialog--personalise .ccc__color-swatch:focus {
    outline: 2px solid var(--brutal-black);
    outline-offset: 2px;
  }

  .ccc__dialog--personalise .ccc__color-swatch--active {
    border-width: 3px;
    border-color: var(--brutal-black);
    box-shadow: 0 0 0 3px var(--brutal-yellow); /* Yellow ring only, no shadow */
    transform: scale(1.05);
  }

  /* Leave blank checkbox - clear and explicit */
  .ccc__dialog--personalise .ccc__leave-blank {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: var(--space-2);
    background: rgba(var(--brutal-yellow), 0.1); /* Subtle yellow tint */
    border: 2px solid rgba(var(--brutal-yellow), 0.3);
    border-radius: var(--brutal-radius);
    font-family: var(--brutal-font-body);
    font-size: 1.4rem;
    font-weight: 600;
    color: var(--brutal-black);
    cursor: pointer;
    transition: all 0.15s ease-in-out;
  }

  .ccc__dialog--personalise .ccc__leave-blank:hover {
    background: rgba(var(--brutal-yellow), 0.2);
    border-color: rgba(var(--brutal-yellow), 0.5);
  }

  .ccc__dialog--personalise .ccc__leave-blank input[type="checkbox"] {
    width: 20px;
    height: 20px;
    cursor: pointer;
  }

  .ccc__dialog--personalise .ccc__leave-blank input[type="checkbox"]:focus {
    outline: var(--brutal-border-thin) solid var(--brutal-black);
    outline-offset: 2px;
  }


  /* PRIMARY CTA - full width at bottom with generous hit area */
  .ccc__dialog--personalise .ccc__form-actions {
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
  }

  .ccc__dialog--personalise .ccc__add-to-basket-btn {
    width: 100%;
    padding: 1.6rem 2.4rem; /* Match choice view buttons */
    font-family: var(--brutal-font-display); /* Display font */
    font-size: 1.6rem;
    font-weight: 700;
    text-transform: uppercase; /* Uppercase */
    letter-spacing: 0.05em;
    background: var(--brutal-black); /* Black background */
    color: var(--brutal-white); /* White text */
    border: var(--brutal-border); /* Thick border */
    border-radius: var(--brutal-radius); /* Angular */
    box-shadow: var(--brutal-shadow-md); /* Hard shadow */
    cursor: pointer;
    transition: all var(--brutal-transition-base);
  }

  .ccc__dialog--personalise .ccc__add-to-basket-btn:hover {
    transform: translate(-2px, -2px); /* Lift effect */
    box-shadow: var(--brutal-shadow-pink); /* Pink shadow on hover */
  }

  .ccc__dialog--personalise .ccc__add-to-basket-btn:active {
    transform: translate(0, 0); /* Punch down */
    box-shadow: var(--brutal-shadow-sm);
  }

  .ccc__dialog--personalise .ccc__add-to-basket-btn:focus {
    outline: var(--brutal-border-thin) solid var(--brutal-black);
    outline-offset: 2px;
  }

  /* Sticky footer visible on desktop - spans both columns */
  .ccc__dialog--personalise .ccc__sticky-footer {
    display: flex !important;
    grid-column: 1 / -1; /* Span all columns */
    margin-left: -4rem; /* Escape modal body padding */
    margin-right: -4rem;
    margin-bottom: -4rem;
    width: calc(100% + 8rem);
  }
}

@keyframes personaliserFadeIn {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.ccc__back {
  display: inline-flex;
  align-items: center;
  gap: 0.8rem;
  padding: 0.8rem 0;
  margin-bottom: 2.5rem;
  border: none;
  background: none;
  font-size: 1.5rem;
  color: rgba(26, 26, 26, 0.7);
  cursor: pointer;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s var(--ease-out-quart);
}

.ccc__back::before {
  content: '←';
  font-size: 1.8rem;
  transition: transform 0.3s var(--ease-out-quart);
  margin-right: 0.4rem;
}

.ccc__back:hover {
  color: var(--brutal-black);
}

.ccc__back:hover::before {
  transform: translateX(-4px);
}

/* Personaliser header with product image */
.ccc__personaliser-header {
  display: grid;
  grid-template-columns: 200px 1fr;
  gap: 2rem;
  align-items: start;
  margin-bottom: 3rem;
}

.ccc__personaliser-image {
  width: 200px;
  height: 200px;
  aspect-ratio: 1;
  object-fit: cover;
  border-radius: var(--brutal-radius);
  box-shadow: var(--brutal-shadow-md);
}

.ccc__personaliser-info {
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding-top: 0.5rem;
}

.ccc__personaliser-title {
  font-size: 2.4rem;
  font-weight: 600;
  margin-bottom: 1rem;
  letter-spacing: -0.02em;
  line-height: 1.2;
}

.ccc__personaliser-variant {
  font-size: 1.6rem;
  color: rgba(26, 26, 26, 0.7);
  font-variant-numeric: tabular-nums;
  margin: 0;
}

/* Restore personalization prompt */
.ccc__restore-prompt {
  background: var(--brutal-white);
  border: var(--brutal-border);
  border-color: var(--brutal-pink);
  border-radius: var(--brutal-radius);
  padding: 1.8rem 2rem;
  margin-bottom: 2.5rem;
  box-shadow: var(--brutal-shadow-sm);
  animation: restorePromptFadeIn 0.5s var(--ease-out-expo) forwards;
}

@keyframes restorePromptFadeIn {
  from {
    opacity: 0;
    transform: translateY(-12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes restorePromptFadeOut {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

.ccc__restore-content {
  display: flex;
  align-items: start;
  gap: 1.4rem;
  margin-bottom: 1.5rem;
}

.ccc__restore-icon {
  flex-shrink: 0;
  color: var(--brutal-pink);
  margin-top: 0.2rem;
}

.ccc__restore-text strong {
  display: block;
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--brutal-black);
  margin-bottom: 0.4rem;
}

.ccc__restore-text p {
  font-size: 1.3rem;
  color: rgba(26, 26, 26, 0.7);
  margin: 0;
}

.ccc__restore-actions {
  display: flex;
  gap: 1rem;
}

.ccc__restore-actions .button {
  flex: 1;
  padding: 1.2rem 1.8rem;
  font-size: 1.4rem;
  font-weight: 600;
  border-radius: var(--brutal-radius);
  transition: all 0.3s var(--ease-out-quart);
}

.ccc__restore-actions .button--small {
  padding: 1.2rem 1.8rem;
}

.ccc__restore-actions .button:hover {
  transform: translateY(-1px);
  box-shadow: var(--brutal-shadow-sm);
}

/* ========================================
   CANVAS PREVIEW (Card Interior)
   ======================================== */

.ccc__preview-section {
  margin: 2.5rem 0;
  padding: 2.5rem;
  background: var(--brutal-white);
  border: var(--brutal-border-thin);
  border-radius: var(--brutal-radius);
}

.ccc__preview-heading {
  font-size: 1.8rem;
  font-weight: 600;
  margin: 0 0 1.5rem 0;
  color: var(--brutal-black);
}

/* Card Interior - Shows TWO pages side by side
   NOTE: Base styles for all views. Overridden by .ccc__dialog--personalise .ccc__card-interior (line ~111)
   in the personalise view for larger, dynamic sizing. */
.ccc__card-interior {
  position: relative;
  width: 100%;
  max-width: 700px;
  height: 350px;
  margin: 0 auto;
  display: flex;
  flex-direction: row;
  background: var(--brutal-white);
  border: var(--brutal-border); /* Thick border */
  border-radius: var(--brutal-radius); /* Angular */
  overflow: hidden;
  box-shadow: var(--brutal-shadow-lg); /* Hard shadow */
}

/* LEFT page - BLANK (envelope side) */
.ccc__card-page--left {
  width: 50%;
  height: 100%;
  background: #F5F5F5; /* Slightly darker grey */
  border-right: var(--brutal-border-thin) dashed var(--brutal-black); /* Brutalist fold line */
  flex-shrink: 0;
}

/* CENTER fold line */
.ccc__card-fold {
  width: 3px; /* Thicker fold */
  height: 100%;
  background: var(--brutal-black); /* Solid black */
  flex-shrink: 0;
}

/* RIGHT page - MESSAGE AREA */
.ccc__card-page--right {
  width: 50%;
  height: 100%;
  background: #FFFFFF;
  padding: 2rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  flex-shrink: 0;
  position: relative;
}

/* ========================================
   MESSAGE TEXT FIELD (inside RIGHT page)
   ======================================== */

.ccc__message-field {
  width: 100%;
  height: auto;
  min-height: 3em;
  max-height: 100%;
  padding: 0;
  margin: 0;
  background: transparent;
  border: 2px solid transparent; /* Base border - transparent so limit states can override */
  outline: none !important;
  resize: none;
  overflow: hidden;
  box-shadow: none !important;

  /* Typography */
  font-family: 'Playfair Display', Georgia, serif !important;
  font-size: 1.6rem;
  line-height: 1.5;
  color: #1A1A1A;
  text-align: center;
  word-wrap: break-word;
  overflow-wrap: break-word;

  /* Vertically centered as it grows */
  display: block;
  transition: border-color 0.3s var(--ease-out-quart), border-width 0.3s var(--ease-out-quart);
}

/* Visual feedback states for text limits - now functional! */
.ccc__message-field--near-limit {
  border-color: var(--brutal-yellow) !important;
  border-width: 3px !important;
}

.ccc__message-field--at-limit {
  border-color: var(--brutal-pink) !important;
  border-width: 4px !important;
}

/* Bounce animation when hitting limit */
.ccc__message-field--bounce {
  animation: textBounce 0.3s ease;
}

@keyframes textBounce {
  0%, 100% { transform: translateY(0); }
  25% { transform: translateY(-2px); }
  75% { transform: translateY(1px); }
}

/* Warning state when text is too long */
.ccc__message-field--overflow {
  color: rgb(218, 47, 47);
}

/* PREMIUM FEEL: Inline overflow warning with guidance */
.ccc__overflow-warning {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  margin-top: 12px;
  background: rgba(239, 68, 68, 0.08);
  border-left: 3px solid rgb(239, 68, 68);
  border-radius: var(--brutal-radius);
  color: rgb(185, 28, 28);
  font-size: 1.4rem;
  line-height: 1.4;
  animation: warningSlideIn 0.3s var(--ease-out-expo) forwards;
}

.ccc__overflow-warning svg {
  flex-shrink: 0;
  width: 16px;
  height: 16px;
  color: rgb(239, 68, 68);
}

@keyframes warningSlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.ccc__message-field::placeholder {
  color: rgba(0, 0, 0, 0.4); /* Darker, more visible */
  font-style: italic;
  font-size: 1.6rem; /* Larger */
  font-weight: 500;
}

.ccc__message-field:focus {
  outline: none !important;
  border: none !important;
  box-shadow: none !important;
}

.ccc__message-field:hover {
  border: none !important;
  outline: none !important;
}


/* Success Banner Animation */
.ccc__success-banner {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  padding: 2rem;
  background: var(--brutal-lime);
  color: var(--brutal-black);
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  font-size: 1.8rem;
  font-weight: 600;
  border-radius: var(--brutal-radius);
  z-index: 100;
  opacity: 0;
  transform: translateY(-100%);
}

@keyframes successSlideDown {
  0% {
    opacity: 0;
    transform: translateY(-100%);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Success state for button */
.button--success {
  background: var(--brutal-lime) !important;
  color: var(--brutal-black) !important;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.8rem;
  animation: buttonSuccess 0.4s ease;
}

@keyframes buttonSuccess {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Typography section styling */
.ccc__typography-section {
  padding: 2rem;
  background: var(--brutal-white);
  border: var(--brutal-border-thin); /* Thick border */
  border-radius: var(--brutal-radius); /* Angular */
  box-shadow: var(--brutal-shadow-sm); /* Hard shadow */
}

/* Form actions section */
.ccc__form-actions {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  padding: 2rem;
  background: rgba(26, 26, 26, 0.02);
  border-radius: var(--brutal-radius);
  margin-top: auto;
}

.ccc__add-to-basket-btn {
  width: 100%;
  padding: 1.6rem 2rem;
  font-size: 1.6rem;
  font-weight: 600;
}

/* Mobile: Stack everything vertically */
@media screen and (max-width: 1023px) {
  .ccc__preview-column,
  .ccc__controls-column {
    grid-column: 1 / -1 !important;
  }

  .ccc__personaliser {
    display: flex !important;
    flex-direction: column;
    padding: 2rem !important;
    gap: 2rem;
  }

  .ccc__typography-section {
    padding: 1.5rem;
  }

  .ccc__form-actions {
    position: sticky;
    bottom: 0;
    left: 0;
    right: 0;
    margin: 0 -2rem -2rem;
    border-radius: 0;
    padding: 1.5rem 2rem;
    background: var(--brutal-white);
    border-top: 1px solid rgba(26, 26, 26, 0.1);
    box-shadow: var(--brutal-shadow-lg);
  }
}

/* Mobile adjustments for card interior */
@media screen and (max-width: 768px) {
  .ccc__card-page--right {
    padding: 1.5rem;
  }

  .ccc__message-field {
    font-size: 1.4rem;
  }

  .ccc__message-field::placeholder {
    font-size: 1.2rem;
  }
}

/* ========================================
   TYPOGRAPHY PREVIEW CONTROLS
   ======================================== */

.ccc__preview-controls {
  margin-top: 2rem;
  padding: 1.8rem;
  background: var(--brutal-white);
  border: var(--brutal-border-thin);
  border-radius: var(--brutal-radius);
  box-shadow: var(--brutal-shadow-sm);
}

.ccc__control-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 1.6rem;
}

.ccc__control-item {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.ccc__control-label {
  font-size: 1.3rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: rgba(26, 26, 26, 0.7);
  margin: 0;
}

/* Font Select Dropdown */
.ccc__font-select {
  padding: 1.4rem 1.6rem;
  border: var(--brutal-border-thin); /* Thick border */
  border-radius: var(--brutal-radius); /* Angular */
  background: var(--brutal-white);
  color: var(--brutal-black);
  font-family: var(--brutal-font-body);
  font-size: 1.8rem;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--brutal-transition-base);
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%231A1A1A' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 1.2rem center;
  padding-right: 3.5rem;
  min-height: 52px;
  box-shadow: var(--retro-inset-shadow); /* Windows 98-style inset shadow */
}

.ccc__font-select option {
  font-size: 1.8rem;
  padding: 1rem;
  font-weight: 600;
}

.ccc__font-select:hover {
  border-color: var(--brutal-black);
  background: var(--brutal-yellow); /* Yellow highlight on hover */
}

.ccc__font-select:focus {
  outline: var(--brutal-border-thin) solid var(--brutal-black);
  outline-offset: 2px;
  border-color: var(--brutal-black);
}

/* Size Buttons */
.ccc__size-buttons {
  display: flex;
  gap: 0.8rem;
}

.ccc__size-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  min-height: 4.4rem;
  border: var(--brutal-border-thin); /* Thick border */
  border-radius: var(--brutal-radius); /* Angular */
  background: var(--brutal-white);
  color: var(--brutal-black);
  font-family: var(--brutal-font-display);
  font-weight: 700;
  cursor: pointer;
  transition: all var(--brutal-transition-base);
  box-shadow: var(--brutal-shadow-sm);
}

.ccc__size-btn:hover {
  border-color: var(--brutal-black);
  background: var(--brutal-pink); /* Pink on hover */
  color: var(--brutal-black);
  transform: translate(-2px, -2px);
  box-shadow: var(--brutal-shadow-md);
}

.ccc__size-btn:active {
  transform: translate(0, 0);
  box-shadow: var(--brutal-shadow-sm);
}

.ccc__size-btn--active {
  border-color: var(--brutal-black);
  background: var(--brutal-lime); /* Lime green when active */
  color: var(--brutal-black);
  transform: rotate(var(--brutal-rotate-sm)); /* Slight rotation */
  box-shadow: var(--brutal-shadow-md);
}

.ccc__size-btn--active:hover {
  background: var(--brutal-lime);
  transform: translate(-1px, -1px) rotate(var(--brutal-rotate-sm));
}

.ccc__size-icon {
  font-family: Georgia, serif;
  font-weight: 700;
  line-height: 1;
}

/* Color Swatches */
.ccc__color-swatches {
  display: flex;
  gap: 0.8rem;
  flex-wrap: wrap;
}

.ccc__color-swatch {
  width: 44px;
  height: 44px;
  border-radius: var(--brutal-radius);
  border: 2px solid var(--brutal-black);
  cursor: pointer;
  transition: all 0.15s ease-in-out;
  box-shadow: none;
  position: relative;
}

.ccc__color-swatch:hover {
  transform: scale(1.05);
  border-width: 3px;
}

.ccc__color-swatch:focus {
  outline: 2px solid var(--brutal-black);
  outline-offset: 2px;
}

.ccc__color-swatch--active {
  border-width: 3px;
  border-color: var(--brutal-black);
  box-shadow: 0 0 0 3px var(--brutal-yellow); /* Yellow ring */
  transform: scale(1.05);
}

/* Responsive adjustments */
@media screen and (max-width: 768px) {
  .ccc__control-row {
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  .ccc__preview-controls {
    padding: 1.5rem;
  }

  .ccc__color-swatches {
    justify-content: flex-start;
  }

  .ccc__color-swatch {
    width: 4.5rem;
    height: 4.5rem;
  }
}

/* ========================================
   STICKY FOOTER BAR
   ======================================== */

.ccc__sticky-footer {
  position: sticky;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 2rem;
  padding: 1.8rem 2.5rem;
  background: var(--brutal-black);
  border-top: var(--brutal-border-thick) solid var(--brutal-black); /* Thick top border */
  box-shadow: none; /* No soft shadow */
  animation: footerSlideUp 0.3s ease-out forwards;
  margin-top: auto;
  margin-left: -2.5rem;
  margin-right: -2.5rem;
  margin-bottom: -2.5rem;
  width: calc(100% + 5rem);
}

@keyframes footerSlideUp {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Footer Delivery Section (Left) */
.ccc__footer-delivery {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  flex: 1;
}

.ccc__footer-delivery-toggle {
  display: flex;
  gap: 0.8rem;
}

/* Delivery Toggle Buttons - White/Black Only (NO yellow) */
.ccc__delivery-toggle-btn {
  padding: 0.8rem 1.4rem;
  font-family: var(--brutal-font-display);
  font-size: 1.3rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  color: var(--brutal-black);
  background: var(--brutal-white);
  border: 2px solid var(--brutal-white); /* Thin border */
  border-radius: var(--brutal-radius);
  cursor: pointer;
  transition: all 0.15s ease-in-out;
  white-space: nowrap;
}

.ccc__delivery-toggle-btn:hover {
  transform: scale(1.02);
}

.ccc__delivery-toggle-btn:focus {
  outline: 2px solid var(--brutal-white);
  outline-offset: 2px;
}

/* Active state - thicker border, NO yellow */
.ccc__delivery-toggle-btn--active {
  border-width: 3px; /* Thicker border when active */
  border-color: var(--brutal-white);
}

.ccc__footer-delivery-summary {
  font-family: var(--brutal-font-body);
  font-size: 1.2rem;
  color: rgba(255, 255, 255, 0.7);
  text-align: left;
}

/* Footer CTA - YELLOW (main action) */
.ccc__footer-cta {
  flex-shrink: 0;
  min-width: 200px;
  padding: 1.4rem 2.8rem;
  font-family: var(--brutal-font-display);
  font-size: 1.5rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-radius: var(--brutal-radius);
  transition: all var(--brutal-transition-base);
  background: var(--brutal-yellow) !important; /* YELLOW - main CTA */
  color: var(--brutal-black) !important;
  border: var(--brutal-border) solid var(--brutal-black) !important;
  box-shadow: var(--brutal-shadow-md) !important;
  cursor: pointer;
}

.ccc__footer-cta:hover {
  transform: translate(-2px, -2px);
  box-shadow: var(--brutal-shadow-lg) !important;
}

.ccc__footer-cta:focus {
  outline: 2px solid var(--brutal-yellow);
  outline-offset: 2px;
}

/* Add padding to personaliser to account for sticky footer */
.ccc__personaliser {
  padding-bottom: 10rem;
}

@media screen and (max-width: 749px) {
  .ccc__sticky-footer {
    flex-direction: column;
    gap: 1rem;
    padding: 1.2rem 1.5rem;
    padding-bottom: calc(1.2rem + env(safe-area-inset-bottom)); /* Support iPhone notch */
    margin-left: -1.5rem;
    margin-right: -1.5rem;
    margin-bottom: -1.5rem;
    width: calc(100% + 3rem);
  }

  .ccc__footer-delivery {
    width: 100%;
  }

  .ccc__footer-delivery-toggle {
    width: 100%;
    justify-content: center;
  }

  .ccc__delivery-toggle-btn {
    flex: 1;
    font-size: 1.2rem;
    padding: 0.7rem 1rem;
  }

  .ccc__footer-delivery-summary {
    text-align: center;
    font-size: 1.1rem;
  }

  .ccc__footer-cta {
    width: 100%;
    min-width: auto;
    padding: 1.2rem 2rem;
    font-size: 1.4rem;
  }

  .ccc__preview-section {
    margin: 2rem 0;
    padding: 1.5rem;
  }

  .ccc__preview-heading {
    font-size: 1.6rem;
  }

  .ccc__canvas-placeholder {
    padding: 2.5rem 1.5rem;
  }

  .ccc__canvas-placeholder svg {
    width: 36px;
    height: 36px;
  }

  .ccc__canvas-placeholder p {
    font-size: 1.3rem;
  }
}

/* ========================================
   TYPOGRAPHY CONTROLS (Font & Size)
   ======================================== */

.ccc__typography-controls {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin-top: 2rem;
  padding: 2rem;
  background: var(--brutal-white);
  border: var(--brutal-border-thin);
  border-radius: var(--brutal-radius);
}

.ccc__control-group {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.ccc__control-group .cc-label {
  font-size: 1.4rem;
  font-weight: 600;
  color: var(--brutal-black);
  margin: 0;
}

.ccc__control-group select {
  padding: 1.2rem 1.5rem;
  font-size: 1.4rem;
  border: 1px solid rgba(26, 26, 26, 0.2);
  border-radius: var(--brutal-radius);
  background: var(--brutal-white);
  color: var(--brutal-black);
  cursor: pointer;
  transition: all 0.3s var(--ease-out-quart);
}

.ccc__control-group select:hover {
  border-color: var(--brutal-black);
  transform: translate(-1px, -1px);
  box-shadow: var(--brutal-shadow-sm);
}

.ccc__control-group select:focus {
  outline: var(--brutal-border-thin) solid var(--brutal-black);
  outline-offset: 2px;
  border-color: var(--brutal-black);
}

@media screen and (max-width: 749px) {
  .ccc__typography-controls {
    grid-template-columns: 1fr;
    gap: 1.2rem;
    padding: 1.5rem;
  }
}


/* Character counter warnings - BRUTALIST COLORS */
.cc-counter--warning {
  color: var(--brutal-warning) !important; /* Yellow */
  font-family: var(--brutal-font-display);
  font-weight: 700;
  text-transform: uppercase;
}

.cc-counter--danger {
  color: var(--brutal-error) !important; /* Pink */
  font-family: var(--brutal-font-display);
  font-weight: 700;
  text-transform: uppercase;
  animation: counterPulse 0.4s ease-in-out;
}

@keyframes counterPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

/* Handle long words in personalizer form */
.ccc__form .cc-textarea,
.ccc__form .cc-input {
  word-wrap: break-word;
  overflow-wrap: break-word;
  word-break: break-word;
  transition: all 0.3s var(--ease-out-quart);
}

.ccc__form .cc-textarea:focus,
.ccc__form .cc-input:focus {
  transform: scale(1.01);
  box-shadow: var(--brutal-shadow-lg);
}

/* Disabled textarea when "leave blank" is checked */
.cc-textarea--disabled {
  background: rgba(26, 26, 26, 0.05) !important;
  color: rgba(26, 26, 26, 0.4) !important;
  cursor: not-allowed !important;
  opacity: 0.6;
}

.cc-textarea--disabled:focus {
  transform: none !important;
  box-shadow: none !important;
}

.ccc__form .button {
  width: 100%;
  margin-top: 2.5rem;
  padding: 1.8rem 2.4rem;
  font-size: 1.7rem;
  font-weight: 600;
  border-radius: var(--brutal-radius);
  transition: all 0.3s var(--ease-out-quart);
}

.ccc__form .button:hover {
  transform: translateY(-2px);
  box-shadow: var(--brutal-shadow-lg);
}

.ccc__form .button:active {
  transform: scale(0.98);
}

/* Leave blank toggle */
.ccc__leave-blank {
  display: flex;
  align-items: center;
  gap: 1.2rem;
  padding: 1.6rem 1.8rem;
  border: 2px solid rgba(26, 26, 26, 0.12);
  border-radius: var(--brutal-radius);
  margin-bottom: 2rem;
  cursor: pointer;
  transition: all 0.3s var(--ease-out-quart);
  background: var(--brutal-white);
}

.ccc__leave-blank:hover {
  border-color: rgba(26, 26, 26, 0.24);
  background: rgba(26, 26, 26, 0.02);
}

.ccc__leave-blank:has(input:checked) {
  border-color: var(--brutal-black);
  background: rgba(26, 26, 26, 0.06);
}

.ccc__leave-blank input[type="checkbox"] {
  width: 2.2rem;
  height: 2.2rem;
  margin: 0;
  cursor: pointer;
  accent-color: var(--brutal-black);
}

.ccc__leave-blank-label {
  font-size: 1.5rem;
  cursor: pointer;
  font-weight: 500;
}

/* ========================================
   DELIVERY METHOD SECTION
   ======================================== */

.ccc__delivery-section {
  margin-top: 3rem;
  padding: 2.5rem;
  background: rgba(26, 26, 26, 0.02);
  border: 1px solid rgba(26, 26, 26, 0.08);
  border-radius: var(--brutal-radius);
}

.ccc__delivery-heading {
  font-family: var(--brutal-font-display);
  font-size: 1.4rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--brutal-black);
  margin: 0 0 1.5rem 0;
}

.ccc__delivery-options {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
  margin-bottom: 2rem;
}

.ccc__delivery-option {
  display: flex;
  align-items: flex-start;
  gap: var(--space-2);
  padding: var(--space-3);
  border: var(--brutal-border); /* Thick border */
  border-radius: var(--brutal-radius); /* Square */
  cursor: pointer;
  transition: all 0.15s ease-in-out;
  background: var(--brutal-white);
  box-shadow: var(--brutal-shadow-sm);
}

.ccc__delivery-option:hover {
  border-color: var(--brutal-black);
  background: var(--brutal-white);
  transform: translate(-2px, -2px);
  box-shadow: var(--brutal-shadow-md);
}

.ccc__delivery-option:has(input:checked) {
  border-color: var(--brutal-black);
  background: var(--brutal-yellow); /* Bold yellow fill for selected */
  box-shadow: var(--brutal-shadow-lg);
  font-weight: 600;
}

.ccc__delivery-option input[type="radio"] {
  width: 2.2rem;
  height: 2.2rem;
  margin: 0.2rem 0 0 0;
  cursor: pointer;
  accent-color: var(--brutal-black);
  flex-shrink: 0;
}

.ccc__delivery-option-content {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  flex: 1;
}

.ccc__delivery-option-title {
  font-family: var(--brutal-font-display);
  font-size: 1.7rem;
  font-weight: 700;
  color: var(--brutal-black);
  letter-spacing: -0.01em;
}

.ccc__delivery-option-desc {
  font-family: var(--brutal-font-body);
  font-size: 1.3rem;
  color: var(--brutal-black);
  opacity: 0.75;
  line-height: 1.5;
}

/* Recipient Fields */
.ccc__recipient-fields {
  margin-top: 2rem;
  padding-top: 2rem;
  border-top: 1px solid rgba(26, 26, 26, 0.1);
  animation: recipientFieldsFadeIn 0.4s var(--ease-out-quart) forwards;
}

@keyframes recipientFieldsFadeIn {
  from {
    opacity: 0;
    transform: translateY(-12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.ccc__recipient-fields[hidden] {
  display: none;
}

.ccc__recipient-heading {
  font-size: 1.6rem;
  font-weight: 600;
  margin: 0 0 1.5rem 0;
  color: var(--brutal-black);
}

.ccc__field-group {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
}

/* Mobile Responsive */
@media screen and (max-width: 749px) {
  .ccc__delivery-section {
    margin-top: 2rem;
    padding: 1.5rem;
  }

  .ccc__delivery-heading {
    font-size: 1.6rem;
    margin-bottom: 1.2rem;
  }

  .ccc__delivery-option {
    padding: 1.5rem;
  }

  .ccc__delivery-option-title {
    font-size: 1.5rem;
  }

  .ccc__delivery-option-desc {
    font-size: 1.3rem;
  }

  .ccc__field-group {
    grid-template-columns: 1fr;
  }

  .ccc__recipient-heading {
    font-size: 1.5rem;
  }
}

/* ========================================
   ERROR HANDLING - PREMIUM STYLING
   ======================================== */

.ccc__error {
  margin-top: 2rem;
  padding: 1.8rem 2rem;
  background: var(--brutal-white);
  border: var(--brutal-border);
  border-color: var(--brutal-pink);
  color: var(--brutal-pink);
  font-size: 1.5rem;
  line-height: 1.6;
  border-radius: var(--brutal-radius);
  box-shadow: var(--brutal-shadow-sm);
  animation: errorShake 0.4s var(--ease-out-quart);
}

@keyframes errorShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-8px); }
  75% { transform: translateX(8px); }
}

.ccc__error[hidden] {
  display: none;
}

.ccc__error h3 {
  font-size: 1.7rem;
  font-weight: 600;
  margin-bottom: 0.8rem;
}

.ccc__error .button {
  margin-top: 1.5rem;
}


/* ========== mobile.css ========== */

/* ========================================
   MOBILE RESPONSIVE (<750px)
   ======================================== */

@media screen and (max-width: 749px) {
  .ccc {
    padding: 2vh 0; /* Space at top/bottom for clicking backdrop */
  }

  .ccc__dialog {
    width: 100%;
    height: 96vh;
    max-width: none;
    max-height: 96vh;
    border-radius: var(--brutal-radius); /* Small radius on mobile */
    animation: dialogEnterMobile 0.4s var(--ease-out-expo) forwards;
    overflow: hidden; /* Dialog doesn't scroll - body does */
    display: flex;
    flex-direction: column;
  }

  @keyframes dialogEnterMobile {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .ccc__body {
    padding: 1.5rem; /* Reduced from 2rem for tighter layout */
    padding-bottom: 0; /* Footer adds its own padding */
    flex: 1;
    overflow-y: auto; /* Body is the scroll container */
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    min-height: 0; /* Allow flexbox to shrink properly */
  }

  .ccc__choice {
    grid-template-columns: 1fr;
    gap: 0; /* No gap - use margins instead for control */
  }

  /* Mobile: Reset title position to under image */
  .ccc__product-preview {
    display: block; /* Normal flow */
  }

  .ccc__product-image {
    grid-column: auto;
    grid-row: auto;
    margin-bottom: 1rem; /* Tight spacing */
  }

  .ccc__product-title {
    grid-column: auto;
    grid-row: auto;
    font-size: 2rem;
    margin-bottom: 0.5rem; /* Tight spacing */
  }

  .ccc__options {
    grid-column: auto;
    grid-row: auto;
    margin-top: 0; /* No top margin */
  }

  /* Mobile: Hide primary button in .ccc__actions, show in footer */
  .ccc__actions .button--primary {
    display: none; /* Hidden on mobile - shown in footer instead */
  }

  .ccc__actions {
    margin-top: 1rem; /* Reduced spacing above actions */
  }

  .ccc__actions .button--secondary {
    margin-bottom: 1rem; /* Reduced from 2rem */
  }

  /* Mobile: Hide submit button in form, show in footer */
  .ccc__form .button--primary[type="submit"] {
    display: none; /* Hidden on mobile - shown in footer instead */
  }

  /* Mobile sticky footer - NEW three-part structure */
  .ccc__footer-mobile {
    display: block; /* Show on mobile */
    position: sticky;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 1.5rem; /* Match body padding */
    padding-bottom: calc(1.5rem + env(safe-area-inset-bottom)); /* Support iPhone notch */
    background: var(--brutal-white);
    border-top: 1px solid rgba(26, 26, 26, 0.2);
    z-index: 10;
    flex-shrink: 0; /* Don't shrink in flex layout */
  }

  .ccc__footer-mobile .button {
    width: 100%;
    margin: 0;
    border-radius: var(--brutal-radius);
  }

  .ccc__product-preview {
    position: static;
  }

  .ccc__product-image {
    border-radius: var(--brutal-radius);
    max-height: 45vh;
    aspect-ratio: auto;
    object-fit: contain;
    width: 100%;
    /* margin-bottom set in mobile reset above (1rem) */
  }

  .ccc__sizes-heading {
    font-size: 1.6rem;
    margin-bottom: 1rem; /* Reduced from default */
  }

  .ccc__sizes {
    margin-bottom: 1rem; /* Reduced from 2rem */
  }

  .ccc__size-option {
    padding: 1.6rem 1.8rem; /* Ensure 44px minimum tap target */
    margin-bottom: 1rem;
    min-height: 44px; /* Accessibility - minimum tap target */
  }

  .ccc__size-option:last-child {
    margin-bottom: 0;
  }

  .ccc__size-label {
    font-size: 1.5rem;
  }

  .ccc__size-price {
    font-size: 1.7rem;
  }

  .ccc__size-dimensions {
    font-size: 1.2rem;
  }

  .ccc__size-badge {
    font-size: 1.1rem;
    padding: 0.3rem 0.7rem;
  }

  .ccc__actions .button {
    font-size: 1.6rem;
    padding: 1.6rem 2rem;
    min-height: 56px; /* Generous tap target on mobile */
  }

  .ccc__close {
    position: fixed; /* Fixed to viewport on mobile */
    top: calc(2vh + 1.5rem); /* Account for modal padding */
    right: 1.5rem;
    width: 48px; /* Larger tap target - was 4rem */
    height: 48px;
    min-width: 44px; /* Ensure accessibility minimum */
    min-height: 44px;
  }

  .ccc__delivery-promise {
    font-size: 1.3rem;
    padding: 0.8rem 1.2rem; /* Reduced padding */
    margin-bottom: 1rem; /* Reduced from 2rem */
  }

  /* Ensure recommendation rail has space */
  #cc-recs-container {
    margin-bottom: 1rem; /* Reduced from 2rem */
    margin-top: 1rem; /* Reduced spacing */
  }

  .ccc__message-ideas-toggle {
    font-size: 1.2rem;
    padding: 0.5rem 1rem;
  }

  .ccc__message-idea {
    font-size: 1.2rem;
    padding: 0.9rem 1rem;
  }

  .ccc__personaliser-header {
    grid-template-columns: 120px 1fr;
    gap: 1.5rem;
    margin-bottom: 2rem;
  }

  .ccc__personaliser-image {
    width: 120px;
    height: 120px;
  }

  .ccc__personaliser-info {
    padding-top: 0;
  }

  .ccc__personaliser-title {
    font-size: 1.8rem;
    margin-bottom: 0.5rem;
  }

  .ccc__personaliser-variant {
    font-size: 1.4rem;
  }

  /* Hide card caption on mobile - we already show header */
  .ccc__card-caption {
    display: none;
  }

  /* Tighten spacing between card and controls */
  .ccc__controls-column {
    margin-top: 1.5rem;
  }

  /* Increase card height to match desktop writing capacity */
  .ccc__dialog--personalise .ccc__card-interior {
    height: 420px;
  }
}

/* ========================================
   HIGH CONTRAST MODE
   ======================================== */

@media (prefers-contrast: high) {
  .ccc__size-option {
    border-width: 3px;
  }

  .ccc__size-option:has(input:checked) {
    border-width: 4px;
  }

  .ccc__backdrop {
    background: rgba(0, 0, 0, 0.85) !important;
    backdrop-filter: none;
  }
}

/* ========================================
   REDUCED MOTION
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .ccc__backdrop {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

/* ========================================
   PRINT (hide modal)
   ======================================== */

@media print {
  .ccc {
    display: none !important;
  }
}


/* ========== states.css ========== */

/**
 * CC-Choice States & Animations
 * All keyframes, transitions, and state-based styles
 */

/* ========================================
   BACKDROP ANIMATIONS
   ======================================== */

@keyframes backdropFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* ========================================
   DIALOG ANIMATIONS
   ======================================== */

@keyframes dialogEnter {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes dialogEnterMobile {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========================================
   LOADING SPINNER ANIMATIONS
   ======================================== */

@keyframes spinnerRotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes spinnerDash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }
  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}

/* ========================================
   BUTTON & CONTROL ANIMATIONS
   ======================================== */

@keyframes closeButtonFadeIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes buttonSuccess {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* ========================================
   CONTENT FADE-IN ANIMATIONS
   ======================================== */

@keyframes contentFadeIn {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes actionsFadeIn {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes optionsFadeIn {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* ========================================
   PRODUCT PREVIEW ANIMATIONS
   ======================================== */

@keyframes productPreviewFadeIn {
  from {
    opacity: 0;
    transform: translateX(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

@keyframes priceChange {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.08);
    color: var(--brutal-pink);
  }
}

@keyframes badgePulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}

/* ========================================
   CONFIRM DIALOG ANIMATIONS
   ======================================== */

@keyframes confirmDialogFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes confirmBackdropFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes confirmPanelSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* ========================================
   PERSONALIZER ANIMATIONS
   ======================================== */

@keyframes personaliserFadeIn {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes restorePromptFadeIn {
  from {
    opacity: 0;
    transform: translateY(-12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes restorePromptFadeOut {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

@keyframes textBounce {
  0%, 100% { transform: translateY(0); }
  25% { transform: translateY(-2px); }
  75% { transform: translateY(1px); }
}

/* ========================================
   WARNING & ERROR ANIMATIONS
   ======================================== */

@keyframes warningSlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes errorShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-8px); }
  75% { transform: translateX(8px); }
}

/* ========================================
   SUCCESS & NOTIFICATION ANIMATIONS
   ======================================== */

@keyframes successSlideDown {
  0% {
    opacity: 0;
    transform: translateY(-100%);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========================================
   FOOTER ANIMATIONS
   ======================================== */

@keyframes footerSlideUp {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========================================
   COUNTER & BADGE ANIMATIONS
   ======================================== */

@keyframes counterPulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

/* ========================================
   RECIPIENT FIELDS ANIMATIONS
   ======================================== */

@keyframes recipientFieldsFadeIn {
  from {
    opacity: 0;
    transform: translateY(-12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ========================================
   ACCESSIBILITY & MEDIA QUERIES
   ======================================== */

@media (prefers-contrast: high) {
  .ccc__size-option {
    border-width: 3px;
  }

  .ccc__size-option:has(input:checked) {
    border-width: 4px;
  }

  .ccc__backdrop {
    background: rgba(0, 0, 0, 0.85) !important;
    backdrop-filter: none;
  }
}

/* ========================================
   REDUCED MOTION
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .ccc__backdrop {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}


